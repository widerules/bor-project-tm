
<!DOCTYPE html> 
<html> 
  <head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
    <meta name="apple-mobile-web-app-capable" content="yes"> 
 
    <style type="text/css"> 
        html, body {
            height: 100%;
        }
        #map {
            width: 100%;
            height: 80%;
            border: 1px solid black;
        }
        .olPopup p { margin:0px; font-size: .9em;}
        .olPopup h2 { font-size:1.2em; }
    </style> 
    <script src="./openlayers/OpenLayers.js"></script> 
    <script type="text/javascript"> 
    //var host="http://192.168.56.1:8080";
    //var host="http://10.0.2.2:8080";
    var host="http://192.168.1.90:8080";
    var lat = 45.02645;
    var lon = 41.93671; 

    var zoom = 15;
    var map, layer;
    

    var map;
    var untiled;
    var tiled;
    var pureCoverage = false;
    // pink tile avoidance
    //OpenLayers.IMAGE_RELOAD_ATTEMPTS = 5;
    // make OL compute scale according to WMS spec
    OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;

    function init(){
    	
    	
    	
        // if this is just a coverage or a group of them, disable a few items,
        // and default to jpeg format
        format = 'image/png';
//         if(pureCoverage) {
//             document.getElementById('filterType').disabled = true;
//             document.getElementById('filter').disabled = true;
//             document.getElementById('antialiasSelector').disabled = true;
//             document.getElementById('updateFilterButton').disabled = true;
//             document.getElementById('resetFilterButton').disabled = true;
//             document.getElementById('jpeg').selected = true;
//             format = "image/jpeg";
//         }
    
        var bounds = new OpenLayers.Bounds(
                0, 0,
                90, 90
            );
        var options = {
            controls: [],
            maxExtent: bounds,
            maxResolution: 0.3515625,
            projection: "EPSG:4326",
            units: 'degrees'
        };
        map = new OpenLayers.Map('map', options);
    
        // setup tiled layer
        tiled = new OpenLayers.Layer.WMS(
            "cite:devlist - Tiled", host+"/geoserver/gwc/service/wms",
            {
                LAYERS: 'cite:devlist',
                STYLES: '',
                format: format,
                tiled: true,
                tilesOrigin : map.maxExtent.left + ',' + map.maxExtent.bottom
            },
            {
                buffer: 0,
                displayOutsideMaxExtent: true,
                isBaseLayer: false,
                yx : {'EPSG:4326' : true}
            } 
        );
        tiledOSM = new OpenLayers.Layer.WMS(
                "cite:OSM - Tiled", host+"/geoserver/gwc/service/wms",
                {
                    LAYERS: 'OSM',
                    STYLES: '',
                    format: format//,
                    //tiled: true,
                    //tilesOrigin : map.maxExtent.left + ',' + map.maxExtent.bottom
                },
                {
                    buffer: 0,
                    displayOutsideMaxExtent: true,
                    isBaseLayer: true,
                    yx : {'EPSG:4326' : true}
                } 
            );
		/*    
        // setup single tiled layer
        untiled = new OpenLayers.Layer.WMS(
            "cite:devlist - Untiled", host+"/geoserver/cite/wms",
            {
                LAYERS: 'cite:devlist',
                STYLES: '',
                format: format
            },
            {
               singleTile: true, 
               ratio: 1, 
               isBaseLayer: false,
               yx : {'EPSG:4326' : true}
            } 
        );
        */
        
        
        
        var kmllayer = new OpenLayers.Layer.Vector("KML", 
                {
                   projection: new OpenLayers.Projection("EPSG:4326"),
                   strategies: [new OpenLayers.Strategy.Fixed()],
                   protocol: new OpenLayers.Protocol.HTTP(
                   {
                      //url: host+"/geoserver/cite/wms/kml?layers=cite:devlist",
                    	//url: host+"/geoserver/gwc/demo/cite:devlist?gridSet=EPSG:4326&format=image/jpeg",
                      format: new OpenLayers.Format.KML(
                      {
                         maxDepth: 1,
                         extractStyles: true, 
                         extractAttributes: true,
                         //singleTile: true, 
                         ratio: 1, 
                         isBaseLayer: true
                      })
                   })
                });
		//map.addLayer(kmllayer,options);
	    

		
	        /*
		
		var map = new OpenLayers.Map({
		    div: "map",
		    layers: [
		        new OpenLayers.Layer.WMS("WMS", "http://vmap0.tiles.osgeo.org/wms/vmap0",{layers: "basic"}),
		        untiled 
// 		        new OpenLayers.Layer.Vector("KML", {
// 		            strategies: [new OpenLayers.Strategy.Fixed()],
// 		            protocol: new OpenLayers.Protocol.HTTP({
// 		                url: host+"/geoserver/www/cite-devlist_.kml",
// 		                //url: host+"/geoserver/gwc/service/kml/devlist.png.kml",
// 		                //url: host+"/geoserver/gwc/service/kml/cite:devlist/x2y1z1.png.kml",
// 		                format: new OpenLayers.Format.KML({
// 		                    extractStyles: true, 
// 		                    extractAttributes: true,
// 		                  //  maxDepth: 2
// 		                })
// 		            })
// 		        })
		    ],
		    //center: new OpenLayers.LonLat(-112.169, 36.099),
		    zoom: 11
		});	
        */

		//map.addLayer(tiled);
		map.addLayer(kmllayer);

        // build up all controls
        map.addControl(new OpenLayers.Control.PanZoomBar({position: new OpenLayers.Pixel(2, 15)}));
        map.addControl(new OpenLayers.Control.Navigation());
        map.addControl(new OpenLayers.Control.Scale($('scale')));
        map.addControl(new OpenLayers.Control.MousePosition({element: $('location')}));
        map.setCenter(new OpenLayers.LonLat(lon, lat), zoom);
    } 

</script> 
     
  </head> 
  <body onload="init()">
  v0.0.3 
    <div id="map" class="smallmap"></div> 
 
    
  </body> 
</html> 